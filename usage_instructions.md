# Документация к применению программы

## Шаг 1: Установка зависимостей
Для установки необходимых библиотек выполнить команду:  

```bash
pip install -r requirements.txt
```

---

## Шаг 2: Подготовка данных
Тестовые изображения выгружаются в папку:  
```
data/images/original_test_data
```

---

## Шаг 3: Разделение изображений на тайлы
Для разделения оригинальных изображений на тайлы выполнить команду:  

```bash
python create_tiles_for_testdata.py
```

Тайлы сохраняются в папку:  
```
data/images/test
```

---

## Шаг 4: Запуск детектирования
Для запуска детектирования на основе предобученной модели YOLOv9 выполнить команду:  

```bash
python detect_dual.py --source 'data/images/test' --img 256 --weights 'runs/train/yolov9-s8/weights/best.pt' --name yolov9_m_c__detect --device cpu --save-conf --save-txt --save-crop
```

Детектирование выполняется на CPU.  
Результаты сохраняются в папках:
- Детектированные тайлы:  
  ```
  runs/detect/yolov9_m_c__detectX
  ```
- Метки в формате TXT:  
  ```
  runs/detect/yolov9_m_c__detect1/labels
  ```

**Формат TXT-файлов:**
- 1 столбец: класс объекта.  
- 2-4 столбцы: координаты найденного дефекта.  
- 5 столбец: вероятность того, что это дефект.

---

## Шаг 5: Реконструкция изображений
Для восстановления изображений из тайлов выполнить команду:

```bash
python reconstraction.py
```

Восстановленные изображения сохраняются в папке:  
```
runs/restored
```

---

## Важные замечания
1. Процесс обработки не автоматизирован. Каждый этап (отделение на тайлы, детектирование, реконструкция) выполняется отдельно.
2. Автоматическая очистка папок с изображениями не предусмотрена. Контролировать объём данных в следующих папках:
   - Оригинальные изображения:  
     ```
     data/images/original_test_data
     ```
   - Тайлы:  
     ```
     data/images/test
     ```
   - Детектированные тайлы:  
     ```
     runs/detect/yolov9_m_c__detectX
     ```
   - Восстановленные изображения:  
     ```
     runs/restored
     ```

